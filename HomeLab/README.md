# HomeLab

## 什么是HomeLab
**Homelab** 是指可在家中搭建的实验（折腾）环境，用于进行实验和学习。通常指一系列硬件设备（家用服务器、小主机、旧电脑手机、树莓派等），上面运行着操作系统环境和软件（Linux、虚拟机、Docker 等）。Homelab 有很多种用途，比如作为软路由、远程主机，也可以部署一系列的自托管服务，如个人书库、影视库、密码管理器、个人网站、RSS 阅读器、播客服务器、备忘录等等。不仅实用，也可以作一门兴趣，为生活增添乐趣。
## 我的Homelab配置
根据需求，我的HomeLab由 **轻量云服务器+PVE虚拟机+NAS**构成。

|          | 云服务器      | PVE             | NAS      |
| -------- | --------- | --------------- | -------- |
| 公网ip     | ipv4      | ipv6            | ipv6     |
| 内存       | 1G        | 16G             | 4G       |
| 性能       | 极弱        | Intel i7-10700H | AMD-A4   |
| 容量       | 10G       | 1TB             | 4TB      |
| 带宽(Mbps) | 1000/1000 | 100/1000        | 100/1000 |
### 云服务器
我的云服务器使用了Akile Cloud的大带宽服务器，上下行1000M。服务器位于香港，访问延迟100ms。主要作为frp服务端为无ipv6环境提供网络访问。此外也可以用作临时VPN科学上网。
### PVE虚拟机
我的PVE虚拟机是使用旧款笔记本搭建。配置为i7-10700H+RTX 2060。内存为16G，以及一块512GB的固态和512GB的机械硬盘。性能放在当下也十分强悍。RTX2060的性能也足以支撑玩一些大型游戏以及轻量AI需求。
由于vGPU驱动等抽象问题，本方案弃用vGPU方案，采取需要时手动切换的方式，避免驱动导致的各种问题。而且本来我也不会在跑AI的时候看影视、更不会在打游戏时跑AI（（

| 虚拟机       | 配置            | 用途             | 是否常驻 |
| --------- | ------------- | -------------- | ---- |
| Docker    | 2核+2G         | 运行大量docker项目   | 是    |
| fnOS      | 4核+4G+RTX2060 | 用作资源/相册备份以及影视库 | 是    |
| iStoreOS  | 1核+1G         | 旁路由            | 是    |
| Ubuntu    | 2核+8G+RTX2060 | MC服务器+项目开发/AI  | 是    |
| Windows   | 4核+4G+RTX2060 | 游戏平台/远程需求      | 否    |
| NOI-Linux | 2核+2G         | 信息学竞赛          | 否    |
#### Docker
目前Docker常驻的项目有hitokoto-api（自建一言接口）、code-server（网页版VScode）、xiaomusic（小爱音箱播放器）。
#### fnOS
非主力NAS，用于相册备份（主要是因为它的相册功能真的好用）以及重要资料备份。此外使用显卡来实现影视库转码等需求。
#### iStoreOS
基于OpenWrt的软路由系统，为了不祸害全家的网络采取旁路由模式，实现科学上网以及frp中转需求。
#### Ubuntu
性能强悍，可以在上面跑工程项目，同时可以用作MC服务器使用。有显卡的加持可以在上面折腾AI项目等需要大量GPU资源的项目。
### NAS
目前主力NAS仍然使用黑群晖系统，（或许在飞牛OS成熟之后会迁移？）本NAS曾经为单一主力服务器使用，在启用PVE后，群晖上只留下了HomeAssistant、Alist网盘、Cloudreve网盘等较难迁移的项目。性能压力大大减小。同时4TB的空间也可以用来存储照片备份、作为本地影视库。也可以作为iSCSI服务端为PC提供网络硬盘功能。
虽然性能放在当下有点落后，但满足这些需求还是很easy的。
## 家庭网络拓扑

![[家庭网络拓扑.jpg]]