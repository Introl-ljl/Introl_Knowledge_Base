![拓扑](/HomeLab/家庭网络拓扑.jpg)
# 网络需求
对于HomeLab，最基本的需求就是通畅合理的网络状况。除此之外，还有公网配置以及科学上网等需求。
# 网络基础
首先考虑**硬件部分**，由于单个路由器性能不足以覆盖书房等位置，所以需要两台路由器mesh组网实现全屋覆盖的要求。因为短期没有2.5Gps的需求（需要更换的硬件太多），所以只选择了WiFi6的路由器。中兴的AX3000很符合我的需求，在性能足够的情况下，稳定性和发热状况都很好。mesh组网的延迟也十分可观，基本保证了在不折腾其他东西的情况下，家里的网络状况是优秀的。
由于我需要光猫作为wifi拓展点使用，所以不使用路由器拨号，但由于公网ipv6的使用需要路由器拨号来关闭防火墙。折腾好长时间后，找到了另一种解决方案，在光猫中关闭ipv6的防火墙。出于安全考虑，路由器的防火墙除了HomeLab设备，其他需要全部开启。
# 网络进阶
在HomeLab中，需求就比较多了。首先由于移动网络时不时抽风屏蔽导致GitHub和Cloudflare无法访问以及一些众所周知的问题，科学上网是十分重要的。但科学上网容易出现各种奇奇怪怪的问题，所以采用旁路由的方式作为HomeLab的主要网络。
所谓旁路由是一种网络配置方式，通过在主路由之外额外添加一个路由设备，专门负责特定的网络任务。因此，其可以实现网络设备的分流，需要的设备手动接入旁路由，而不影响整体网络布局。
## iStoreOS
iStoreOS是基于OpenWrt系统的路由系统。其页面美观，操作简洁，十分适合新手使用。在iStoreOS中，主要配置了Open小猫，广告拦截，TailScale和frp客户端等服务。这些服务在网络上都有十分丰富的教程文档。
# 可能会遇到的坑
主要集中在软路由上，由于软路由的特殊性，**十分不建议将其作为主路由使用**。一旦出问题，全家都断网。（当然独居老哥忽略）作为旁路由使用虽然需要手动更改网关，但在软路由失效后，设备仍然可以正常上网，大大减少由于网络问题产生的不必要的麻烦。